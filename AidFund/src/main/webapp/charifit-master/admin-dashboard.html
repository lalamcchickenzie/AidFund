<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/nice-select.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/slicknav.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/gijgo.css">
    <link rel="stylesheet" href="css/theme-default.css">
    <!-- Fredoka font for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@700&display=swap" rel="stylesheet">
    <style>
      body {
        background: #f6f8fb;
        font-family: 'Fredoka', Arial, sans-serif;
      }
      .sidebar {
        position: fixed;
        top: 0; left: 0; bottom: 0;
        width: 220px;
        background: #fff;
        box-shadow: 2px 0 12px rgba(0,0,0,0.06);
        padding: 30px 0 0 0;
        z-index: 100;
        border-radius: 0 20px 20px 0;
      }
      .sidebar .brand {
        font-size: 2rem;
        font-weight: 700;
        color: #222;
        margin-bottom: 2rem;
        text-align: center;
        letter-spacing: 1px;
      }
      .sidebar .brand .plus { color: #a51d23; }
      .sidebar ul { list-style: none; padding: 0; }
      .sidebar ul li { margin: 18px 0; }
      .sidebar ul li a {
        color: #555;
        text-decoration: none;
        font-size: 1.1rem;
        padding: 10px 30px;
        display: block;
        border-radius: 8px 0 0 8px;
        transition: background 0.2s, color 0.2s;
      }
      .sidebar ul li a.active, .sidebar ul li a:hover {
        background: #e6e9f0;
        color: #4b49ac;
      }
      .topbar {
        margin-left: 220px;
        height: 64px;
        background: #fff;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 32px;
        border-radius: 0 0 20px 20px;
      }
      .topbar .profile {
        display: flex;
        align-items: center;
        gap: 18px;
      }
      .topbar .profile img {
        width: 36px; height: 36px; border-radius: 50%;
      }
      .dashboard-content {
        margin-left: 240px;
        margin-top: 80px;
        padding: 32px 32px 32px 0;
      }
      .dashboard-cards {
        display: flex;
        gap: 24px;
        margin-bottom: 32px;
      }
      .dashboard-card {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.07);
        padding: 24px 32px;
        flex: 1;
        min-width: 180px;
        text-align: center;
      }
      .dashboard-card h4 {
        font-size: 1.1rem;
        color: #888;
        margin-bottom: 8px;
      }
      .dashboard-card .count {
        font-size: 2.2rem;
        font-weight: 700;
        color: #4b49ac;
      }
      .table-area {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.07);
        padding: 24px;
      }
      .btn-primary, .btn-success, .btn-danger, .btn-warning {
        border-radius: 8px;
        font-weight: 600;
      }
      .table thead th {
        background: #f6f8fb;
        border: none;
      }
      .table tbody tr {
        border-top: 1px solid #f0f0f0;
      }
      .download-btns {
        margin-bottom: 18px;
        display: flex;
        gap: 12px;
      }
    </style>
</head>
<body>
    <div class="sidebar">
      <div class="brand">AidFund<span class="plus">+</span></div>
      <ul>
        <li><a href="#" class="active"><i class="fa fa-tachometer"></i> Dashboard</a></li>
        <li><a href="#causes"><i class="fa fa-heart"></i> Causes</a></li>
        <li><a href="#reports"><i class="fa fa-file"></i> Reports</a></li>
        <li><a href="admin-login.html"><i class="fa fa-sign-out"></i> Logout</a></li>
      </ul>
    </div>
    <div class="topbar">
      <div><b>Welcome, Admin</b></div>
      <div class="profile">
        <i class="fa fa-bell" style="font-size: 1.3rem; color: #4b49ac;"></i>
        <img src="img/volenteer/1.png" alt="profile">
      </div>
    </div>
    <div class="dashboard-content">
      <div class="dashboard-cards">
        <div class="dashboard-card">
          <h4>Total Causes</h4>
          <div class="count" id="totalCauses">0</div>
        </div>
        <div class="dashboard-card">
          <h4>Active Causes</h4>
          <div class="count" id="activeCauses">0</div>
        </div>
        <div class="dashboard-card">
          <h4>Past Causes</h4>
          <div class="count" id="pastCauses">0</div>
        </div>
        <div class="dashboard-card">
          <h4>Total Donations</h4>
          <div class="count" id="totalDonations">$0</div>
        </div>
      </div>
      <div class="download-btns" id="reports">
        <button class="btn btn-primary" id="downloadCSV"><i class="fa fa-download"></i> Download CSV</button>
        <button class="btn btn-warning" id="downloadPDF"><i class="fa fa-file-pdf-o"></i> Download PDF</button>
      </div>
      <div class="table-area" id="causes">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3 style="margin:0; font-size:1.4rem;">Manage Causes</h3>
          <button class="btn btn-success" id="createCampaignBtn"><i class="fa fa-plus"></i> Create Cause</button>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Description</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="campaignTableBody">
            <!-- Causes will be listed here -->
          </tbody>
        </table>
      </div>
    </div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.form.js"></script>
    <script src="js/ajax-form.js"></script>
    <script>
        $(document).ready(function() {
          // Sample data for causes
          let causes = [
            { id: 1, name: 'Water for All', description: 'Provide clean water to villages.', status: 'Active', donations: 1200 },
            { id: 2, name: 'Books for Kids', description: 'Distribute books to children.', status: 'Past', donations: 800 },
            { id: 3, name: 'Food Drive', description: 'Feed the hungry.', status: 'Active', donations: 2000 }
          ];

          function updateDashboard() {
            $('#totalCauses').text(causes.length);
            $('#activeCauses').text(causes.filter(c => c.status === 'Active').length);
            $('#pastCauses').text(causes.filter(c => c.status === 'Past').length);
            let totalDon = causes.reduce((sum, c) => sum + (c.donations || 0), 0);
            $('#totalDonations').text('$' + totalDon);
          }

          function renderCauses() {
            let html = '';
            causes.forEach(function(cause) {
              html += `<tr>
                <td>${cause.id}</td>
                <td>${cause.name}</td>
                <td>${cause.description}</td>
                <td><span class="badge badge-${cause.status === 'Active' ? 'success' : 'secondary'}">${cause.status}</span></td>
                <td>
                  <button class="btn btn-primary btn-sm edit-btn" data-id="${cause.id}"><i class="fa fa-edit"></i></button>
                  <button class="btn btn-danger btn-sm delete-btn" data-id="${cause.id}"><i class="fa fa-trash"></i></button>
                </td>
              </tr>`;
            });
            $('#campaignTableBody').html(html);
          }

          updateDashboard();
          renderCauses();

          $('#createCampaignBtn').click(function() {
            let name = prompt('Enter Cause Name:');
            let description = prompt('Enter Cause Description:');
            if (name && description) {
              let newId = causes.length ? Math.max(...causes.map(c => c.id)) + 1 : 1;
              causes.push({ id: newId, name, description, status: 'Active', donations: 0 });
              renderCauses();
              updateDashboard();
            }
          });

          $(document).on('click', '.edit-btn', function() {
            let id = $(this).data('id');
            let cause = causes.find(c => c.id === id);
            let newName = prompt('Edit name:', cause.name);
            let newDesc = prompt('Edit description:', cause.description);
            let newStatus = prompt('Edit status (Active/Past):', cause.status);
            if (newName && newDesc && (newStatus === 'Active' || newStatus === 'Past')) {
              cause.name = newName;
              cause.description = newDesc;
              cause.status = newStatus;
              renderCauses();
              updateDashboard();
            }
          });

          $(document).on('click', '.delete-btn', function() {
            let id = $(this).data('id');
            if (confirm('Are you sure you want to delete this cause?')) {
              causes = causes.filter(c => c.id !== id);
              renderCauses();
              updateDashboard();
            }
          });

          // Download CSV
          $('#downloadCSV').click(function() {
            let csv = 'ID,Name,Description,Status,Donations\n';
            causes.forEach(c => {
              csv += `${c.id},"${c.name}","${c.description}",${c.status},${c.donations}\n`;
            });
            let blob = new Blob([csv], { type: 'text/csv' });
            let url = URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = 'causes_report.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
          });

          // Download PDF (simple, just table as text)
          $('#downloadPDF').click(function() {
            let win = window.open('', '', 'width=800,height=600');
            win.document.write('<h2>Causes Report</h2>');
            win.document.write('<table border="1" style="width:100%;border-collapse:collapse;"><tr><th>ID</th><th>Name</th><th>Description</th><th>Status</th><th>Donations</th></tr>');
            causes.forEach(c => {
              win.document.write(`<tr><td>${c.id}</td><td>${c.name}</td><td>${c.description}</td><td>${c.status}</td><td>${c.donations}</td></tr>`);
            });
            win.document.write('</table>');
            win.print();
            win.close();
          });
        });
    </script>
</body>
</html> 